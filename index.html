<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ShivanshCodex Login</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="center-box">
  <h2>ShivanshCodex</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="signup()">SIGN UP</button>
  <button onclick="login()">LOGIN</button>
</div>

<script type="module">
import { auth, db } from "./firebase.js";
import { createUserWithEmailAndPassword, signInWithEmailAndPassword } from
"https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";
import { ref, set } from
"https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";

const email = u => u+"@shivanshcodex.com";

window.signup = async()=>{
  let u=username.value,p=password.value;
  let c=await createUserWithEmailAndPassword(auth,email(u),p);
  await set(ref(db,"users/"+c.user.uid),{
    username:u,role:"user"
  });
  location.href="chat.html";
};

window.login = async()=>{
  await signInWithEmailAndPassword(auth,email(username.value),password.value);
  location.href="chat.html";
};
</script>

</body>
</html>
